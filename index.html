<!DOCTYPE html>
<html lang="tr">
<head>
  <!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="https://res.cloudinary.com/dl5qwgbes/image/upload/v1736267062/transparent_logo-removebg-preview_q5pqrm.png">
    <!-- Mobil uyum ve tarayÄ±cÄ± ayarlarÄ± -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Sayfa BaÅŸlÄ±ÄŸÄ± -->
    <title>Ä°slam KÃ¼tÃ¼phanesi - Ä°slami Kitap, E-Kitap ve PDF ArÅŸivi | Kur'an, Hadis, FÄ±kÄ±h, Tasavvuf</title>

    <!-- Meta AÃ§Ä±klamasÄ± (Description) -->
    <meta name="description" content="Ä°slam KÃ¼tÃ¼phanesi: Kur'an, Hadis, Tefsir, FÄ±kÄ±h ve Tasavvuf eserlerinden e-kitap, PDF ve dijital arÅŸiv sunan kapsamlÄ± bir platform. Ä°slami kitaplar, ilmihal, dinÃ® makaleler ve dualara kadar geniÅŸ iÃ§eriklerle ilim yolculuÄŸunuza rehber olun. E-kitap indir, PDF arÅŸivi keÅŸfet, Ä°slam tarihi ve kÃ¼ltÃ¼rÃ¼yle zenginleÅŸ.">

    <!-- Anahtar Kelimeler (Keywords) -->
    <meta name="keywords" content="Ä°slam, Ä°slami Kitap, Ä°slam KÃ¼tÃ¼phanesi, PDF, E-kitap, Dini E-kitap, Kur'an, Hadis, Tefsir, FÄ±kÄ±h, Tasavvuf, Ä°slam Tarihi, Peygamber HayatÄ±, Ä°lmihal, Dua, Zikir, Ä°slami PDF, Ãœcretsiz E-kitap Ä°ndir, Ä°slami Kaynaklar, Ä°mam Nebevi, Ä°mam Gazali, Ebu Hanife, Ä°mam ÅÃ¢fi">

    <!-- Arama MotorlarÄ± -->
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta name="author" content="Ä°slam KÃ¼tÃ¼phanesi - Muzaffer Abdullah Ortakaya">
    <meta name="language" content="Turkish">
    <meta name="revisit-after" content="7 days">

    <!-- Open Graph (OG) Etiketleri -->
    <meta property="og:title" content="Ä°slam KÃ¼tÃ¼phanesi - Ä°slami Kitap, E-kitap ve PDF ArÅŸivi">
    <meta property="og:description" content="Kur'an, Hadis, Tefsir, FÄ±kÄ±h, Tasavvuf, Ä°slam tarihi gibi geniÅŸ Ã§aplÄ± Ä°slami kaynaklarÄ±n yer aldÄ±ÄŸÄ± e-kitap ve PDF kÃ¼tÃ¼phanesi.">
    <meta property="og:image" content="https://res.cloudinary.com/dl5qwgbes/image/upload/v1736266614/website_logo-removebg-preview_ysxsie.png">
    <meta property="og:url" content="https://islamkutuphanesi.com">
    <meta property="og:type" content="website">

    <!-- Twitter Card Etiketleri -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Ä°slam KÃ¼tÃ¼phanesi - Ä°slami Kitap, E-kitap ve PDF ArÅŸivi">
    <meta name="twitter:description" content="Zengin Ä°slami kitap arÅŸivimizde Kur'an, Hadis, Tefsir ve pek Ã§ok e-kitap ve PDF formatÄ±nda eser bulunuyor.">
    <meta name="twitter:image" content="https://res.cloudinary.com/dl5qwgbes/image/upload/v1736266614/website_logo-removebg-preview_ysxsie.png">
    <meta name="theme-color" content="#006d6f">

    <!-- YapÄ±landÄ±rÄ±lmÄ±ÅŸ Veri (Structured Data - JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Ä°slam KÃ¼tÃ¼phanesi",
      "url": "https://islamkutuphanesi.com",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://islamkutuphanesi.com/ara?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>

    <!-- Ã–rnek: Kitaplara yÃ¶nelik ÅŸema (KapsamlÄ± bÃ¼yÃ¼k kÃ¼tÃ¼phanelerde kullanÄ±lÄ±r) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Collection",
      "name": "Ä°slam KÃ¼tÃ¼phanesi E-kitap Koleksiyonu",
      "hasPart": [
        {
          "@type": "Book",
          "name": "Kur'an-Ä± Kerim Tefsiri",
          "author": "Ä°mam Gazali",
          "url": "https://islamkutuphanesi.com/kitaplar/kuran-i-kerim-tefsiri.pdf"
        },
        {
          "@type": "Book",
          "name": "Hadis-i Åerif SeÃ§kisi",
          "author": "Ebu Hanife",
          "url": "https://islamkutuphanesi.com/kitaplar/hadis-serif-seckisi.pdf"
        }
        /* DiÄŸer kitaplarÄ±n bilgilerini de ekleyerek geniÅŸletebilirsiniz */
      ]
    }
    </script>

    <!-- Google Fonts (Ã–rnek) -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>

<!-- Site Ä°Ã§eriklerinizin yer alacaÄŸÄ± kÄ±sÄ±m -->
<!-- Ã–rnek Navigasyon, Banner, Son Eklenen E-kitaplar, vs. -->

</body>
</html>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background-color: #f0f2f5;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        header {
            background: linear-gradient(135deg, #006d6f, #006d6f);
            color: #fff;
            padding: 5px 5px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.7);
            flex-wrap: wrap;
        }
        header h1 {
            margin: 0;
            font-size: 2rem;
            letter-spacing: 1px;
        }
        .search-bar {
            width: 350px;
            max-width: 100%;
            height: 40px;
            border-radius: 20px;
            border: none;
            outline: none;
            padding: 0 20px;
            font-size: 16px;
            background-color: #ffffff;
            color: #000000;
            transition: box-shadow 0.3s ease;
            text-transform: capitalize;
        }
        .search-bar::placeholder {
            color: #888888;
        }
        .search-bar:focus {
            box-shadow: 0 0 15px rgba(0, 191, 165, 0.6);
        }
        @media (max-width: 600px) {
            .search-bar {
              width: 220px;
              height: 35px;
              font-size: 14px;
            }
        }
        section.container {
            padding: 20px 10px;
        }
        section h2 {
            text-align: center;
            color: #333333;
            margin-bottom: 40px;
            font-size: 2rem;
            position: relative;
        }
        section h2::after {
            content: '';
            position: absolute;
            width: 60px;
            height: 4px;
            background-color: #00bfa5;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 2px;
        }
        .search-bar {
            width: 60%; /* VarsayÄ±lan geniÅŸlik */
            max-width: 300px;
            transition: width 0.3s ease;
        }
        .search-bar:focus {
            width: 90%; /* TÄ±klandÄ±ÄŸÄ±nda geniÅŸleyecek boyut */
        }
        @media (max-width: 768px) {
            .logo {
                width: 50px; /* Logonun geniÅŸliÄŸi */
                height: auto;
            }
        }
        @media (max-width: 600px) {
            header {
              padding: 10px 15px;
            }
            header h1 {
              font-size: 1.5rem;
            }
        }
        .scroll-container {
            display: flex;
            overflow-x: auto;
            padding: 20px 0;
            gap: 10px;
        }
        .scroll-container::-webkit-scrollbar {
            display: none;
        }
        hr.section-separator {
            width: 80%;
            margin: 5px auto;
            border: 0;
            height: 2px;
            background: linear-gradient(to right, #ccc, #00bfa5, #ccc);
            border-radius: 2px;
        }
        footer {
            background-color: #006d6f;
            color: #fff;
            text-align: center;
            padding: 20px 10px;
            margin-top: 20px;
            position: relative;
            transition: background-color 0.3s ease;
        }
        footer a {
            color: #ffffff;
            text-decoration: none;
            margin: 0 10px;
            transition: color 0.3s ease;
            font-weight: 300;
        }
        footer a:hover {
            color: #ffdd57;
        }
        .book-card {
            flex: 0 0 175px;
            height: 275px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            border-radius: 15px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            text-align: center;
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .book-card::before {
            content: "";
            position: absolute;
            top: 0; left: 0;
            width: 100%;
            height: 100%;
            background-color: #006d6f;
            opacity: 0;
            transition: opacity 0.6s ease;
            pointer-events: none;
            z-index: 1;
        }
        .book-card:hover::before {
            opacity: 1;
        }
        .book-card:hover {
            transform: translateY(-5px) rotate(2deg);
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.7);
            filter: brightness(1);
        }
        .book-title {
            position: relative;
            z-index: 2;
            font-size: 15px;
            font-weight: bold;
            color: white;
            opacity: 0;
            transition: opacity 0.6s ease;
            margin: 125px 0 0 0;
        }
        .book-card:hover .book-title {
            opacity: 1;
        }
        body {
            color-scheme: light;
            forced-color-adjust: none;
        }
        * {
            forced-color-adjust: none;
        }
        body, header, section, footer {
            -webkit-filter: none !important;
            filter: none !important;
        }
        @media (max-width: 600px) {
            .book-card {
                flex: 0 0 140px;
                height: 220px;
            }
        }
        :root {
          /* AydÄ±nlÄ±k tema iÃ§in varsayÄ±lan renk deÄŸiÅŸkenleri */
          --bg-color: #f0f2f5;
          --text-color: #000;
          --header-bg: linear-gradient(135deg, #006d6f, #006d6f);
        }
        body {
          background-color: var(--bg-color);
          color: var(--text-color);
        }
        /* KaranlÄ±k mod devredeyken deÄŸerleri deÄŸiÅŸtiriyoruz */
        .dark-mode {
          --bg-color: #1e1e1e;
          --text-color: #fff;
          --header-bg: linear-gradient(135deg, #333333, #333333);
        }
        /* Header ve diÄŸer bileÅŸenler, bu deÄŸiÅŸkenleri kullansÄ±n */
        header {
          background: var(--header-bg);
        }
        @media (max-width: 768px) {
            .dark-mode-toggle {
                display: none;
            }
        }
        .dark-mode-toggle {
            background: transparent;
            border: none;
            cursor: pointer;
            color: #fff;
            font-size: 2.3rem;
            margin-left: 10px;
            transition: transform 0.3s;
        }
        .dark-mode-toggle:hover {
            transform: scale(1.1);
        }

        /*
            ------------------------------------------------
              SADECE 480PX VE ALTI (TELEFON) Ä°Ã‡Ä°N 
              BÃœYÃœTEÃ‡ VE ARAMA KUTUSU ORTA HÄ°ZALAMA
            ------------------------------------------------
        */
        @media (min-width: 481px) {
            /* MasaÃ¼stÃ¼ ve tablet gÃ¶rÃ¼nÃ¼mÃ¼nde bÃ¼yÃ¼teÃ§ gizli */
            #mobileSearchToggle {
                display: none !important;
            }
        }
        @media (max-width: 480px) {
            /* BÃ¼yÃ¼teÃ§: H1 yanÄ±na dursun (zaten orada) */
            #mobileSearchToggle {
                font-size: 1.7rem; 
                background: transparent;
                color: #fff;
                border: none;
                cursor: pointer;
                transition: transform 0.3s;
                margin-left: 10px; /* H1 ile arasÄ± */
            }
            /* Arama Ã§ubuÄŸu telefonda Ã¶nce gizli */
            #searchInput {
                display: none;
            }
            /* mobile-search-active olunca header iÃ§in relative ve overflow:visible diyoruz 
               -> arama kutusunu header iÃ§inde ortalayabilelim */
            header.mobile-search-active {
                position: relative;
                overflow: visible;
            }
            /* Arama ortaya gelsin */
            header.mobile-search-active #searchInput {
                display: block;
                position: absolute; 
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 80% !important;
                animation: slideDown 0.3s ease forwards; 
                z-index: 999;
            }
            /* BÃ¼yÃ¼teÃ§ kaybolsun */
            header.mobile-search-active #mobileSearchToggle {
                display: none;
            }
            /* Logo ve baÅŸlÄ±k gÃ¶rÃ¼nmesin */
            header.mobile-search-active img,
            header.mobile-search-active h1 {
                visibility: hidden;
            }
            @keyframes slideDown {
              0% {
                opacity: 0;
                transform: translate(-50%, -60%);
              }
              100% {
                opacity: 1;
                transform: translate(-50%, -50%);
              }
            }
        }
    </style>
</head>
<body>
<header>
  <div style="display: inline-flex; align-items: center;">
    <img src="/assets/images/transparent_logo-removebg-preview_q5pqrm.png" alt="Logo" style="height: 5.5em; margin-right: 5px;">
    <h1>Ä°slam KÃ¼tÃ¼phanesi</h1>
    <!-- Telefon ekranÄ±nda gÃ¶rÃ¼necek bÃ¼yÃ¼teÃ§ -->
    <button id="mobileSearchToggle" aria-label="Arama AÃ§/Kapat">ğŸ”</button>
  </div>
  <div style="display: flex; align-items: center;">
    <input type="text" id="searchInput" class="search-bar" placeholder="Kitap Ara..." aria-label="Kitap Ara">
    <!-- Tema DeÄŸiÅŸtirme Butonu -->
    <button id="themeToggleBtn" class="dark-mode-toggle" aria-label="Tema DeÄŸiÅŸtir">
      <span id="darkModeIcon">ğŸŒ™</span>
    </button>
  </div>
</header>
<link rel="icon" type="image/png" href="/assets/icons/favicon.png">
<link rel="shortcut icon" href="/assets/icons/favicon.png" type="image/x-icon">
<link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">
<link rel="manifest" href="/assets/json/manifest.json">
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js')
      .then(registration => {
        console.log('Service Worker BaÅŸarÄ±yla Kaydedildi!', registration);
      })
      .catch(error => {
        console.error('Service Worker Kaydedilemedi:', error);
      });
  } else {
    console.log('Service Worker desteklenmiyor.');
  }
</script>
<!-- Tefsir -->
<section class="container">
  <h2>Tefsir KitaplarÄ±</h2>
  <div class="scroll-container" id="tefsirContainer">
    <!-- JS ile eklenecek -->
  </div>
</section>

<!-- Hadis -->
<section class="container">
  <h2>Hadis KitaplarÄ±</h2>
  <div class="scroll-container" id="hadisContainer">
    <!-- JS ile eklenecek -->
  </div>
</section>

<!-- Akide -->
<section class="container">
  <h2>Akide KitaplarÄ±</h2>
  <div class="scroll-container" id="akideContainer">
    <!-- JS ile eklenecek -->
  </div>
</section>

<!-- FÄ±kÄ±h -->
<section class="container">
  <h2>FÄ±kÄ±h KitaplarÄ±</h2>
  <div class="scroll-container" id="fikihContainer">
    <!-- JS ile eklenecek -->
  </div>
</section>

<!-- Siyer -->
<section class="container">
  <h2>Siyer KitaplarÄ±</h2>
  <div class="scroll-container" id="siyerContainer">
    <!-- JS ile eklenecek -->
  </div>
</section>

<!-- Ahlak Ve Tasavvuf -->
<section class="container">
  <h2>Ahlak Ve Tasavvuf KitaplarÄ±</h2>
  <div class="scroll-container" id="ahlakContainer">
    <!-- JS ile eklenecek -->
  </div>
</section>

<!-- Dua Ve Zikir -->
<section class="container">
  <h2>Dua Ve Zikir KitaplarÄ±</h2>
  <div class="scroll-container" id="duaContainer">
    <!-- JS ile eklenecek -->
  </div>
</section>

<!-- Genel -->
<section class="container">
  <h2>Genel Kitaplar</h2>
  <div class="scroll-container" id="genelContainer">
    <!-- JS ile eklenecek -->
  </div>
</section>

<footer>
  <p>TÃ¼m HaklarÄ± Gizlidir. &copy; 2024</p>
  <p>abdullah.ortakaya@doque.com.tr</p>
</footer>

<script>
/* 
  -----------------------------------------------------------
   1) Ã–N HAZIRLIK: GitHub'daki books.json RAW linkini gir
  -----------------------------------------------------------
*/
const JSON_URL = "/assets/json/Book.json";
// YukarÄ±daki satÄ±rÄ± kendi GitHub RAW linkinle deÄŸiÅŸtir.

// KaÃ§ tane kitap gÃ¶zÃ¼ksÃ¼n? (Her kategori iÃ§in)
const MAX_BOOKS_PER_CATEGORY = 20;

// Kategorileri bir listeye aldÄ±k,
// JSONâ€™da "category" alanÄ±, bu metinle eÅŸleÅŸirse o containerâ€™a gider.
const categories = [
  { name: "Tefsir",              containerId: "tefsirContainer" },
  { name: "Hadis",               containerId: "hadisContainer" },
  { name: "Akide",               containerId: "akideContainer" },
  { name: "FÄ±kÄ±h",               containerId: "fikihContainer" },
  { name: "Siyer",               containerId: "siyerContainer" },
  { name: "Ahlak Ve Tasavvuf",   containerId: "ahlakContainer" },
  { name: "Dua Ve Zikir",        containerId: "duaContainer" },
  { name: "Genel",               containerId: "genelContainer" }
];

let allBooks = [];

/* 
  -----------------------------------------------------------
   2) Sayfa YÃ¼klendiÄŸinde JSON'u Ã‡ek, Kategorileri Doldur
  -----------------------------------------------------------
*/
document.addEventListener("DOMContentLoaded", () => {
  fetch(JSON_URL)
    .then(response => response.json())
    .then(data => {
      allBooks = data.books || [];
      // Her kategori iÃ§in, o kategorinin random 20 kitabÄ±nÄ± gÃ¶ster
      categories.forEach(cat => displayDailyCategoryBooks(cat.name, cat.containerId));
      // Arama Ã§ubuÄŸu
      initSearchFunctionality();
    })
    .catch(err => {
      console.error("books.json verisi Ã§ekilirken hata:", err);
    });
});

/* 
  -----------------------------------------------------------
   3) Her Kategori Ä°Ã§in GÃœNLÃœK Random 20 Kitap SeÃ§me
      (LocalStorage ile aynÄ± gÃ¼n tekrar girilse dahi aynÄ± 20)
  -----------------------------------------------------------
*/
function displayDailyCategoryBooks(categoryName, containerId) {
  let finalBooks = [];
  const categoryBooks = allBooks.filter(b => b.category === categoryName);
  const shuffled = [...categoryBooks].sort(() => 0.5 - Math.random());
  finalBooks = shuffled.slice(0, MAX_BOOKS_PER_CATEGORY);
  renderBooks(finalBooks, containerId);
}

/*
  -----------------------------------------------------------
   4) Kitap KartlarÄ±nÄ± Belirtilen Container'a Basma Fonksiyonu
  -----------------------------------------------------------
*/
function renderBooks(bookArray, containerId) {
  const container = document.getElementById(containerId);
  if (!container) return;
  container.innerHTML = ""; // Ã–nce temizle

  bookArray.forEach(book => {
    const card = document.createElement("a");
    card.className = "book-card";
    card.style.backgroundImage = `url('${book.imageUrl}')`;
    card.setAttribute("aria-label", book.ariaLabel || book.name);

    card.addEventListener("click", () => {
      window.open(book.link, "_blank");
    });

    const titleDiv = document.createElement("div");
    titleDiv.className = "book-title";
    titleDiv.textContent = book.name;

    card.appendChild(titleDiv);
    container.appendChild(card);
  });
}

/*
  -----------------------------------------------------------
   5) Arama Kutusu: TÃ¼m Kategorilerde Arama
      - Arama boÅŸsa daily random kalÄ±r
      - Arama yapÄ±lÄ±rsa sadece eÅŸleÅŸenler gÃ¶sterilir
  -----------------------------------------------------------
*/
function initSearchFunctionality() {
  const searchInput = document.getElementById("searchInput");
  if (!searchInput) return;

  searchInput.addEventListener("input", function () {
    const filter = normalizeString(this.value.trim());

    if (!filter) {
      categories.forEach(cat => displayDailyCategoryBooks(cat.name, cat.containerId));
      return;
    }

    let scrolledToFirst = false;
    categories.forEach(cat => {
      const catBooks = allBooks.filter(b => b.category === cat.name);
      const words = filter.split(/\s+/);
      const filtered = catBooks.filter(book => {
        const title = normalizeString(book.name);
        const label = normalizeString(book.ariaLabel || "");
        return words.some(word => title.includes(word) || label.includes(word));
      });

      renderBooks(filtered, cat.containerId);

      if (filtered.length > 0 && !scrolledToFirst) {
        const targetContainer = document.getElementById(cat.containerId);
        if (targetContainer) {
          targetContainer.scrollIntoView({ behavior: "smooth", block: "center" });
        }
        scrolledToFirst = true;
      }
    });
  });
}

/*
  -----------------------------------------------------------
   6) YazÄ± NormalleÅŸtirme (TÃ¼rkÃ§e Karakter vs.)
  -----------------------------------------------------------
*/
function normalizeString(str) {
  return str
    .toLowerCase()
    .replace(/Ä±/g, 'i')
    .replace(/ÄŸ/g, 'g')
    .replace(/Ã¼/g, 'u')
    .replace(/ÅŸ/g, 's')
    .replace(/Ã§/g, 'c')
    .replace(/Ã¶/g, 'o')
    .replace(/Ä°/g, 'i')
    .replace(/I/g, 'i')
    .replace(/Ä/g, 'g')
    .replace(/Ãœ/g, 'u')
    .replace(/Å/g, 's')
    .replace(/Ã‡/g, 'c')
    .replace(/Ã–/g, 'o')
    .replace(/\s+/g, '');
}

// Otomatik KaydÄ±rma AyarlarÄ±
const scrollContainers = document.querySelectorAll('.scroll-container');
const scrollSpeed = 4;
const edgeWidth = 175;
scrollContainers.forEach(container => {
    let isScrolling = false;
    let scrollDirection = 0;
    const handleMouseMove = (e) => {
        const rect = container.getBoundingClientRect();
        const mouseX = e.clientX - rect.left;
        if (mouseX < edgeWidth) {
            scrollDirection = -1;
        } else if (mouseX > rect.width - edgeWidth) {
            scrollDirection = 1;
        } else {
            scrollDirection = 0;
        }
        if (scrollDirection !== 0 && !isScrolling) {
            isScrolling = true;
            requestAnimationFrame(scrollStep);
        }
    };
    const handleMouseLeave = () => {
        scrollDirection = 0;
        isScrolling = false;
    };
    const scrollStep = () => {
        if (scrollDirection === -1) {
            container.scrollLeft -= scrollSpeed;
        } else if (scrollDirection === 1) {
            container.scrollLeft += scrollSpeed;
        }
        if (scrollDirection !== 0) {
            requestAnimationFrame(scrollStep);
        } else {
            isScrolling = false;
        }
    };
    container.addEventListener('mousemove', handleMouseMove);
    container.addEventListener('mouseleave', handleMouseLeave);
});

document.addEventListener("DOMContentLoaded", function() {
  const lazyImages = document.querySelectorAll('.book-card');
  const imageObserver = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const bookCard = entry.target;
        observer.unobserve(bookCard);
      }
    });
  });
  lazyImages.forEach(image => {
    imageObserver.observe(image);
  });
});

// service-worker.js
const CACHE_NAME = "kutuphane-cache-v1";
const urlsToCache = [
  "/index.html",
  "/styles.css",
  "/script.js",
  // ... LazÄ±m olan diÄŸer dosyalar veya resimler ...
];

self.addEventListener("install", event => {
  event.waitUntil(
    caches.open(CACHE_NAME).then(cache => {
      return cache.addAll(urlsToCache);
    })
  );
});

self.addEventListener("fetch", event => {
  event.respondWith(
    fetch(event.request).catch(() => caches.match(event.request))
  );
});
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js")
    .then(() => console.log("Service Worker kaydedildi"))
    .catch(err => console.error("SW kaydedilemedi:", err));
}

// Koyu/AydÄ±nlÄ±k Mod Butonu (Emoji) iÃ§in JS
document.addEventListener("DOMContentLoaded", function() {
  const themeToggleBtn = document.getElementById("themeToggleBtn");
  const darkModeIcon = document.getElementById("darkModeIcon");
  let currentTheme = localStorage.getItem("theme") || "light";
  if (currentTheme === "dark") {
    document.body.classList.add("dark-mode");
    darkModeIcon.textContent = "â˜€ï¸"; 
  } else {
    darkModeIcon.textContent = "ğŸŒ™";
  }
  themeToggleBtn.addEventListener("click", function() {
    document.body.classList.toggle("dark-mode");
    if (document.body.classList.contains("dark-mode")) {
      localStorage.setItem("theme", "dark");
      darkModeIcon.textContent = "â˜€ï¸";
    } else {
      localStorage.setItem("theme", "light");
      darkModeIcon.textContent = "ğŸŒ™";
    }
  });
});

/*
  -----------------------------------------------------------
    2) TELEFONDA BÃœYÃœTEÃ‡E TIKLAYINCA ARAMA AÃ‡MA
       DIÅARISINA TIKLAYINCA KAPAMA
  -----------------------------------------------------------
*/
document.addEventListener("DOMContentLoaded", function() {
    const mobileSearchToggle = document.getElementById("mobileSearchToggle");
    const headerElement = document.querySelector("header");
    const searchBar = document.getElementById("searchInput");

    // BÃ¼yÃ¼tece tÄ±klayÄ±nca aÃ§/kapa
    mobileSearchToggle?.addEventListener("click", function(e) {
        e.stopPropagation();
        headerElement.classList.toggle("mobile-search-active");
        if (headerElement.classList.contains("mobile-search-active")) {
            searchBar.focus();
        }
    });

    // EÄŸer telefon arama aktifse, tÄ±klama baÅŸka yerse -> kapat
    document.addEventListener("click", function(e) {
        if (!headerElement.classList.contains("mobile-search-active")) return;
        if (searchBar.contains(e.target) || mobileSearchToggle.contains(e.target)) {
            return; 
        }
        headerElement.classList.remove("mobile-search-active");
    });
});
const CACHE_NAME = "kutuphane-cache-v1";
const urlsToCache = [
  "/", // Ana sayfa
  "/index.html",
  "/styles.css",
  "/script.js",
  "/assets/json/manifest.json",
  "/assets/images/transparent_logo-removebg-preview_q5pqrm.png",
  "/assets/icons/icon-192x192.png",
  "/assets/icons/icon-512x512.png",
  // DiÄŸer gerekli dosyalar
];

self.addEventListener("install", event => {
  event.waitUntil(
    caches.open(CACHE_NAME).then(cache => {
      return cache.addAll(urlsToCache);
    })
  );
});

self.addEventListener("fetch", event => {
  event.respondWith(
    caches.match(event.request).then(response => {
      return response || fetch(event.request);
    })
  );
});
</script>
</body>
</html>