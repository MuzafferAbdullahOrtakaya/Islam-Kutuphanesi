<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="https://res.cloudinary.com/dl5qwgbes/image/upload/v1736267062/transparent_logo-removebg-preview_q5pqrm.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ƒ∞slam K√ºt√ºphanesi, Kur'an tefsirleri, hadisler, ƒ∞slami kitaplar, fƒ±kƒ±h, tasavvuf eserleri, dua, zikir ve genel dini kaynaklarla ƒ∞slam d√ºnyasƒ±na ƒ±≈üƒ±k tutar.">
    <meta name="keywords" content="Kur'an, Hadis, Tefsir, ƒ∞slami Kitaplar, Fƒ±kƒ±h, Tasavvuf, Dua ve Zikir, ƒ∞slam, ƒ∞slam K√ºt√ºphanesi, Dini E-kitaplar, ƒ∞slam Tarihi, ƒ∞slami Eƒüitim, Peygamber Hayatƒ±, ƒ∞slam ƒ∞lmihali, Dini Ders Kitaplarƒ±, ƒ∞slami Ar≈üiv, ƒ∞slami K√ºt√ºphane">
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <meta name="author" content="ƒ∞slam K√ºt√ºphanesi - Muzaffer Abdullah Ortakaya">
    <meta name="language" content="Turkish">
    <meta name="revisit-after" content="7 days">
    <meta property="og:title" content="ƒ∞slam K√ºt√ºphanesi - ƒ∞slami Kitaplar ve Kaynaklar">
    <meta property="og:description" content="Tefsir, hadis, fƒ±kƒ±h, dua, zikir ve diƒüer ƒ∞slami kitaplar i√ßin online k√ºt√ºphane.">
    <meta property="og:image" content="https://res.cloudinary.com/dl5qwgbes/image/upload/v1736266614/website_logo-removebg-preview_ysxsie.png">
    <meta property="og:url" content="https://islamkutuphanesi.com">
    <meta property="og:type" content="website">
    <title>ƒ∞slam K√ºt√ºphanesi - ƒ∞slami Kitap ve Kaynaklar</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <!-- CSS dosyasƒ± / Font Awesome istersek ekleriz, ancak ikonlarƒ± emojiye √ßektik -->
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Poppins', sans-serif;
            background-color: #f0f2f5;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        header {
            background: linear-gradient(135deg, #006d6f, #006d6f);
            color: #fff;
            padding: 5px 5px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.7);
            flex-wrap: wrap;
        }
        header h1 {
            margin: 0;
            font-size: 2rem;
            letter-spacing: 1px;
        }
        .search-bar {
            width: 350px;
            max-width: 100%;
            height: 40px;
            border-radius: 20px;
            border: none;
            outline: none;
            padding: 0 20px;
            font-size: 16px;
            background-color: #ffffff;
            color: #000000;
            transition: box-shadow 0.3s ease;
            text-transform: capitalize;
        }
        .search-bar::placeholder {
            color: #888888;
        }
        .search-bar:focus {
            box-shadow: 0 0 15px rgba(0, 191, 165, 0.6);
        }
        @media (max-width: 600px) {
            .search-bar {
              width: 220px;
              height: 35px;
              font-size: 14px;
            }
        }
        section.container {
            padding: 20px 10px;
        }
        section h2 {
            text-align: center;
            color: #333333;
            margin-bottom: 40px;
            font-size: 2rem;
            position: relative;
        }
        section h2::after {
            content: '';
            position: absolute;
            width: 60px;
            height: 4px;
            background-color: #00bfa5;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 2px;
        }
        @media (max-width: 600px) {
            header {
              padding: 10px 15px;
            }
            header h1 {
              font-size: 1.5rem;
            }
        }
        .scroll-container {
            display: flex;
            overflow-x: auto;
            padding: 20px 0;
            gap: 10px;
        }
        .scroll-container::-webkit-scrollbar {
            display: none;
        }
        hr.section-separator {
            width: 80%;
            margin: 5px auto;
            border: 0;
            height: 2px;
            background: linear-gradient(to right, #ccc, #00bfa5, #ccc);
            border-radius: 2px;
        }
        footer {
            background-color: #006d6f;
            color: #fff;
            text-align: center;
            padding: 20px 10px;
            margin-top: 20px;
            position: relative;
            transition: background-color 0.3s ease;
        }
        footer a {
            color: #ffffff;
            text-decoration: none;
            margin: 0 10px;
            transition: color 0.3s ease;
            font-weight: 300;
        }
        footer a:hover {
            color: #ffdd57;
        }
        .book-card {
            flex: 0 0 175px;
            height: 275px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            border-radius: 15px;
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
            text-align: center;
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .book-card::before {
            content: "";
            position: absolute;
            top: 0; left: 0;
            width: 100%;
            height: 100%;
            background-color: #006d6f;
            opacity: 0;
            transition: opacity 0.6s ease;
            pointer-events: none;
            z-index: 1;
        }
        .book-card:hover::before {
            opacity: 1;
        }
        .book-card:hover {
            transform: translateY(-5px) rotate(2deg);
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.7);
            filter: brightness(1);
        }
        .book-title {
            position: relative;
            z-index: 2;
            font-size: 15px;
            font-weight: bold;
            color: white;
            opacity: 0;
            transition: opacity 0.6s ease;
            margin: 125px 0 0 0;
        }
        .book-card:hover .book-title {
            opacity: 1;
        }
        body {
            color-scheme: light;
            forced-color-adjust: none;
        }
        * {
            forced-color-adjust: none;
        }
        body, header, section, footer {
            -webkit-filter: none !important;
            filter: none !important;
        }
        @media (max-width: 600px) {
            .book-card {
                flex: 0 0 140px;
                height: 220px;
            }
        }
        :root {
          /* Aydƒ±nlƒ±k tema i√ßin varsayƒ±lan renk deƒüi≈ükenleri */
          --bg-color: #f0f2f5;
          --text-color: #000;
          --header-bg: linear-gradient(135deg, #006d6f, #006d6f);
        }
        body {
          background-color: var(--bg-color);
          color: var(--text-color);
        }
        /* Karanlƒ±k mod devredeyken deƒüerleri deƒüi≈ütiriyoruz */
        .dark-mode {
          --bg-color: #1e1e1e;
          --text-color: #fff;
          --header-bg: linear-gradient(135deg, #333333, #333333);
        }
        /* Header ve diƒüer bile≈üenler, bu deƒüi≈ükenleri kullansƒ±n */
        header {
          background: var(--header-bg);
        }

        /* Karanlƒ±k mod butonu (Emoji) */
        .dark-mode-toggle {
            background: transparent;
            border: none;
            cursor: pointer;
            color: #fff;
            font-size: 2.3rem;
            margin-left: 10px;
            transition: transform 0.3s;
        }
        .dark-mode-toggle:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body>
<header>
  <div style="display: inline-flex; align-items: center;">
    <img src="https://res.cloudinary.com/dl5qwgbes/image/upload/v1736267062/transparent_logo-removebg-preview_q5pqrm.png" alt="Logo" style="height: 5.5em; margin-right: 5px;">
    <h1>ƒ∞slam K√ºt√ºphanesi</h1>
  </div>
  <div style="display: flex; align-items: center;">
    <input type="text" id="searchInput" class="search-bar" placeholder="Kitap Ara..." aria-label="Kitap Ara">
    <!-- Ay/G√ºne≈ü Emojili Buton -->
    <button id="themeToggleBtn" class="dark-mode-toggle" aria-label="Tema Deƒüi≈ütir">
      <span id="darkModeIcon">üåô</span>
    </button>
  </div>
</header>

<!-- Tefsir -->
<section class="container">
  <h2>Tefsir Kitaplarƒ±</h2>
  <div class="scroll-container" id="tefsirContainer">
    <!-- JS ile eklenecek -->
  </div>
</section>

<!-- Hadis -->
<section class="container">
  <h2>Hadis Kitaplarƒ±</h2>
  <div class="scroll-container" id="hadisContainer">
    <!-- JS ile eklenecek -->
  </div>
</section>

<!-- Akide -->
<section class="container">
  <h2>Akide Kitaplarƒ±</h2>
  <div class="scroll-container" id="akideContainer">
    <!-- JS ile eklenecek -->
  </div>
</section>

<!-- Fƒ±kƒ±h -->
<section class="container">
  <h2>Fƒ±kƒ±h Kitaplarƒ±</h2>
  <div class="scroll-container" id="fikihContainer">
    <!-- JS ile eklenecek -->
  </div>
</section>

<!-- Siyer -->
<section class="container">
  <h2>Siyer Kitaplarƒ±</h2>
  <div class="scroll-container" id="siyerContainer">
    <!-- JS ile eklenecek -->
  </div>
</section>

<!-- Ahlak Ve Tasavvuf -->
<section class="container">
  <h2>Ahlak Ve Tasavvuf Kitaplarƒ±</h2>
  <div class="scroll-container" id="ahlakContainer">
    <!-- JS ile eklenecek -->
  </div>
</section>

<!-- Dua Ve Zikir -->
<section class="container">
  <h2>Dua Ve Zikir Kitaplarƒ±</h2>
  <div class="scroll-container" id="duaContainer">
    <!-- JS ile eklenecek -->
  </div>
</section>

<!-- Genel -->
<section class="container">
  <h2>Genel Kitaplar</h2>
  <div class="scroll-container" id="genelContainer">
    <!-- JS ile eklenecek -->
  </div>
</section>

<footer>
  <p>T√ºm Haklarƒ± Gizlidir. &copy; 2024</p>
  <p>abdullah.ortakaya@doque.com.tr</p>
</footer>

<script>
/* 
  -----------------------------------------------------------
   1) √ñN HAZIRLIK: GitHub'daki books.json RAW linkini gir
  -----------------------------------------------------------
*/
const JSON_URL = "https://raw.githubusercontent.com/MuzafferAbdullahOrtakaya/Islam-Kutuphanesi/refs/heads/main/Book.json"; 
// Yukarƒ±daki satƒ±rƒ± kendi GitHub RAW linkinle deƒüi≈ütir.

// Ka√ß tane kitap g√∂z√ºks√ºn? (Her kategori i√ßin)
const MAX_BOOKS_PER_CATEGORY = 20;

// Kategorileri bir listeye aldƒ±k,
// JSON‚Äôda "category" alanƒ±, bu metinle e≈üle≈üirse o container‚Äôa gider.
const categories = [
  { name: "Tefsir",              containerId: "tefsirContainer" },
  { name: "Hadis",               containerId: "hadisContainer" },
  { name: "Akide",               containerId: "akideContainer" },
  { name: "Fƒ±kƒ±h",               containerId: "fikihContainer" },
  { name: "Siyer",               containerId: "siyerContainer" },
  { name: "Ahlak Ve Tasavvuf",   containerId: "ahlakContainer" },
  { name: "Dua Ve Zikir",        containerId: "duaContainer" },
  { name: "Genel",               containerId: "genelContainer" }
];

let allBooks = [];

/* 
  -----------------------------------------------------------
   2) Sayfa Y√ºklendiƒüinde JSON'u √áek, Kategorileri Doldur
  -----------------------------------------------------------
*/
document.addEventListener("DOMContentLoaded", () => {
  fetch(JSON_URL)
    .then(response => response.json())
    .then(data => {
      allBooks = data.books || [];
      // Her kategori i√ßin, o kategorinin random 20 kitabƒ±nƒ± g√∂ster
      categories.forEach(cat => displayDailyCategoryBooks(cat.name, cat.containerId));
      // Arama √ßubuƒüu
      initSearchFunctionality();
    })
    .catch(err => {
      console.error("books.json verisi √ßekilirken hata:", err);
    });
});

/* 
  -----------------------------------------------------------
   3) Her Kategori ƒ∞√ßin G√úNL√úK Random 20 Kitap Se√ßme
      (LocalStorage ile aynƒ± g√ºn tekrar girilse dahi aynƒ± 20)
  -----------------------------------------------------------
*/
function displayDailyCategoryBooks(categoryName, containerId) {
  // localStorage anahtarlarƒ±: "randomDate-kategori", "randomBooks-kategori"
  const today = new Date().toISOString().slice(0, 10);
  const dateKey = `randomDate-${categoryName}`;
  const booksKey = `randomBooks-${categoryName}`;

  const storedDate = localStorage.getItem(dateKey);
  const storedBooks = localStorage.getItem(booksKey);

  let finalBooks = [];

  // √ñnce JSON'da bu kategoriye ait kitaplarƒ± bul
  const categoryBooks = allBooks.filter(b => b.category === categoryName);

  if (storedDate === today && storedBooks) {
    finalBooks = JSON.parse(storedBooks);
  } else {
    const shuffled = [...categoryBooks].sort(() => 0.5 - Math.random());
    finalBooks = shuffled.slice(0, MAX_BOOKS_PER_CATEGORY);
    localStorage.setItem(dateKey, today);
    localStorage.setItem(booksKey, JSON.stringify(finalBooks));
  }

  // DOM'a bas
  renderBooks(finalBooks, containerId);
}

/*
  -----------------------------------------------------------
   4) Kitap Kartlarƒ±nƒ± Belirtilen Container'a Basma Fonksiyonu
  -----------------------------------------------------------
*/
function renderBooks(bookArray, containerId) {
  const container = document.getElementById(containerId);
  if (!container) return;
  container.innerHTML = ""; // √ñnce temizle

  bookArray.forEach(book => {
    const card = document.createElement("a");
    card.className = "book-card";
    card.style.backgroundImage = `url('${book.imageUrl}')`;
    card.setAttribute("aria-label", book.ariaLabel || book.name);

    card.addEventListener("click", () => {
      window.open(book.link, "_blank");
    });

    const titleDiv = document.createElement("div");
    titleDiv.className = "book-title";
    titleDiv.textContent = book.name;

    card.appendChild(titleDiv);
    container.appendChild(card);
  });
}

/*
  -----------------------------------------------------------
   5) Arama Kutusu: T√ºm Kategorilerde Arama
      - Arama bo≈üsa daily random kalƒ±r
      - Arama yapƒ±lƒ±rsa sadece e≈üle≈üenler g√∂sterilir
  -----------------------------------------------------------
*/
function initSearchFunctionality() {
  const searchInput = document.getElementById("searchInput");
  if (!searchInput) return;

  searchInput.addEventListener("input", function () {
    const filter = normalizeString(this.value.trim());

    if (!filter) {
      categories.forEach(cat => displayDailyCategoryBooks(cat.name, cat.containerId));
      return;
    }

    let scrolledToFirst = false;
    categories.forEach(cat => {
      const catBooks = allBooks.filter(b => b.category === cat.name);
      const words = filter.split(/\s+/);
      const filtered = catBooks.filter(book => {
        const title = normalizeString(book.name);
        const label = normalizeString(book.ariaLabel || "");
        return words.some(word => title.includes(word) || label.includes(word));
      });

      renderBooks(filtered, cat.containerId);

      if (filtered.length > 0 && !scrolledToFirst) {
        const targetContainer = document.getElementById(cat.containerId);
        if (targetContainer) {
          targetContainer.scrollIntoView({ behavior: "smooth", block: "center" });
        }
        scrolledToFirst = true;
      }
    });
  });
}

/*
  -----------------------------------------------------------
   6) Yazƒ± Normalle≈ütirme (T√ºrk√ße Karakter vs.)
  -----------------------------------------------------------
*/
function normalizeString(str) {
  return str
    .toLowerCase()
    .replace(/ƒ±/g, 'i')
    .replace(/ƒü/g, 'g')
    .replace(/√º/g, 'u')
    .replace(/≈ü/g, 's')
    .replace(/√ß/g, 'c')
    .replace(/√∂/g, 'o')
    .replace(/ƒ∞/g, 'i')
    .replace(/I/g, 'i')
    .replace(/ƒû/g, 'g')
    .replace(/√ú/g, 'u')
    .replace(/≈û/g, 's')
    .replace(/√á/g, 'c')
    .replace(/√ñ/g, 'o')
    .replace(/\s+/g, '');
}

// Otomatik Kaydƒ±rma Ayarlarƒ±
const scrollContainers = document.querySelectorAll('.scroll-container');
const scrollSpeed = 4;
const edgeWidth = 175;
scrollContainers.forEach(container => {
    let isScrolling = false;
    let scrollDirection = 0;
    const handleMouseMove = (e) => {
        const rect = container.getBoundingClientRect();
        const mouseX = e.clientX - rect.left;
        if (mouseX < edgeWidth) {
            scrollDirection = -1;
        } else if (mouseX > rect.width - edgeWidth) {
            scrollDirection = 1;
        } else {
            scrollDirection = 0;
        }
        if (scrollDirection !== 0 && !isScrolling) {
            isScrolling = true;
            requestAnimationFrame(scrollStep);
        }
    };
    const handleMouseLeave = () => {
        scrollDirection = 0;
        isScrolling = false;
    };
    const scrollStep = () => {
        if (scrollDirection === -1) {
            container.scrollLeft -= scrollSpeed;
        } else if (scrollDirection === 1) {
            container.scrollLeft += scrollSpeed;
        }
        if (scrollDirection !== 0) {
            requestAnimationFrame(scrollStep);
        } else {
            isScrolling = false;
        }
    };
    container.addEventListener('mousemove', handleMouseMove);
    container.addEventListener('mouseleave', handleMouseLeave);
});

document.addEventListener("DOMContentLoaded", function() {
  const lazyImages = document.querySelectorAll('.book-card');
  const imageObserver = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const bookCard = entry.target;
        observer.unobserve(bookCard);
      }
    });
  });
  lazyImages.forEach(image => {
    imageObserver.observe(image);
  });
});

// service-worker.js
const CACHE_NAME = "kutuphane-cache-v1";
const urlsToCache = [
  "/index.html",
  "/styles.css",
  "/script.js",
  // ... Lazƒ±m olan diƒüer dosyalar veya resimler ...
];

self.addEventListener("install", event => {
  event.waitUntil(
    caches.open(CACHE_NAME).then(cache => {
      return cache.addAll(urlsToCache);
    })
  );
});

self.addEventListener("fetch", event => {
  event.respondWith(
    fetch(event.request).catch(() => caches.match(event.request))
  );
});
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js")
    .then(() => console.log("Service Worker kaydedildi"))
    .catch(err => console.error("SW kaydedilemedi:", err));
}

// Koyu/Aydƒ±nlƒ±k Mod Butonu (Emoji) i√ßin JS
document.addEventListener("DOMContentLoaded", function() {
  const themeToggleBtn = document.getElementById("themeToggleBtn");
  const darkModeIcon = document.getElementById("darkModeIcon");

  // Mevcut tema: localStorage
  let currentTheme = localStorage.getItem("theme") || "light";

  // Sayfa ilk a√ßƒ±lƒ±rken kontrol
  if (currentTheme === "dark") {
    document.body.classList.add("dark-mode");
    darkModeIcon.textContent = "‚òÄÔ∏è"; // Koyu mod: g√ºne≈ü ikonu
  } else {
    darkModeIcon.textContent = "üåô"; // Aydƒ±nlƒ±k mod: ay ikonu
  }

  // Buton tƒ±klamasƒ±nda ge√ßi≈ü 
  themeToggleBtn.addEventListener("click", function() {
    document.body.classList.toggle("dark-mode");
    if (document.body.classList.contains("dark-mode")) {
      localStorage.setItem("theme", "dark");
      darkModeIcon.textContent = "‚òÄÔ∏è";
    } else {
      localStorage.setItem("theme", "light");
      darkModeIcon.textContent = "üåô";
    }
  });
});
</script>
</body>
</html>